!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="daa01889-5f7b-48e1-84b1-51b152aadf72",e._sentryDebugIdIdentifier="sentry-dbid-daa01889-5f7b-48e1-84b1-51b152aadf72")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"f0223803"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{19841:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/agentVerify",function(){return n(83295)}])},82596:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(30758),i=n(26190);function a(e,t){var n=(0,i.A)(e);(0,r.useEffect)(function(){if(null!==t){var e=setInterval(function(){null!==n.current&&n.current()},t);return function(){return clearInterval(e)}}},[t,n])}},43698:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(20837),i=n(43952),a=n(94086),o=n(42022);function s(e){return(0,a.Y)(o.Ay,(0,i._)((0,r._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M3.25 12a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm7 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm7 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}},83295:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ey});var r,i,a=n(13454),o=n(72275),s=n(5482),u=n(94086),l=n(60049),c=n(30758),d=n(20837),p=n(45009),f=n(30632),g=n(72813);function h(){var e=(0,p._)(["\n  fragment AgentAuthorizations on OrgAuthorizations {\n    paidAgent: useAiAgent(tier: paid) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    freeAgent: useAiAgent(tier: free) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,p._)(["\n  query AgentEmailVerification {\n    currentUser {\n      id\n      email\n      isVerified\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=(0,p._)(["\n  query GetUserAgentAuthorizations {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AgentAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var y={},_=(0,f.J1)(h()),w=(0,f.J1)(m());function b(e){var t=(0,d._)({},y,e);return g.I(w,t)}var x=(0,f.J1)(v(),_);function A(){var e=(0,p._)(["\n  query AgentVerifyCurrentUser {\n    currentUser {\n      id\n      username\n      email\n      timeCreated\n    }\n  }\n"]);return A=function(){return e},e}var Y={},k=(0,f.J1)(A()),C=n(97407),L=n(91061),D=n(6867),E=n(43952),S=n(66622),z=n(27189),U=n(55195),R=n(3274),I=n(28668),F=n(73754),O=n(64328),P=n(90508),B=n(82596),T=n(87925),V=n(80001),N=n(12887),H=n(24955),Q=n(73943),W=n(10168),j=n(1478),q=n(32842),G=n(40172),J=n(98541),M=n(31955),$=n(40889),Z=n(52186),X=n(8367),K=n(16021),ee=n(14753),et=n(17900),en=n(43698),er="I'm building your project right now. Hang tight while your App loads.",ei=(0,j.v)(["contentBackgroundColor","footerHeight","footerOpacity"]),ea=ei.cssVars,eo=ei.styleTokens,es=(0,W.x)({container:[q.wp.position.relative],fakeAgent:[q.wp.pt(16),q.wp.colWithGap(8)],buttonContainer:[q.wp.width("100%"),q.wp.justify.spaceBetween,q.wp.flex.row,q.wp.px(32),q.wp.align.center,(0,o._)({marginTop:"-16px"},q.$_.max("tabletMin"),[q.wp.px(8)])],pill:[q.wp.width("fit-content"),{textWrap:"nowrap"}],pillContainer:[q.wp.pt(4)],header:[q.wp.flex.growAndShrink(1),q.wp.pr(16)],root:[q.wp.pr(32),(i={containerType:"inline-size"},(0,o._)(i,ea.footerHeight,"28px"),(0,o._)(i,ea.footerOpacity,"1"),(0,o._)(i,'+ [data-event-type*="ai"] [data-avatar]',{visibility:"hidden"}),(0,o._)(i,':has(+ [data-event-type="ai-message"], + [data-event-type="secrets"],  + [data-event-type="plan"])',(r={paddingBottom:4},(0,o._)(r,ea.footerHeight,"0px"),(0,o._)(r,ea.footerOpacity,"0"),r)),i)],avatar:[q.wp.pt(6),q.wp.position.relative],main:[q.wp.position.relative,q.wp.flex.shrink(1),q.wp.colWithGap(6)],contentWrapper:[q.wp.position.relative],content:[q.wp.borderRadius(4),q.wp.px(8),q.wp.py(6),q.wp.position.relative,{backgroundColor:eo.contentBackgroundColor}],footer:[q.wp.px(8),(0,E._)((0,d._)({},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{transitionProperty:t.join(", "),transitionDuration:Q.Ds.duration,transitionTimingFunction:Q.Ds.timingFunction}}("height","opacity")),{height:eo.footerHeight,opacity:eo.footerOpacity})]});function eu(e,t){if("queue"===t.type){var n=t.text,r=t.kind,i={id:(0,R.A)(),done:!1,text:n,kind:r,timestamp:new Date};return(0,E._)((0,d._)({},e),{messageQueue:(0,z._)(e.messageQueue).concat([i])})}if("tick"===t.type){if(0===e.messageQueue.length)return e;var a=e.messageQueue[0];if(0===e.messageList.length||e.messageList[e.messageList.length-1].id!==a.id){var o=(0,E._)((0,d._)({},a),{text:""});return(0,E._)((0,d._)({},e),{messageList:(0,z._)(e.messageList).concat([o])})}var s=e.messageList[e.messageList.length-1],u=s.text.length,l=a.text[u],c=s.text+l,p=c===a.text,f=(0,E._)((0,d._)({},s),{text:c,done:p});return(0,E._)((0,d._)({},e),{messageList:(0,z._)(e.messageList.slice(0,-1)).concat([f]),messageQueue:p?e.messageQueue.slice(1):e.messageQueue})}return e}var el=function(){var e=(0,S._)((0,c.useReducer)(eu,{messageQueue:[],messageList:[]}),2),t=e[0],n=e[1],r=0===t.messageQueue.length;(0,B.A)(function(){n({type:"tick"})},r?null:15);var i=(0,c.useCallback)(function(e,t){n({type:"queue",text:e,kind:t})},[n]);return{messageList:t.messageList,streamText:i,isStreaming:!r}};function ec(e){var t,n=e.elevated,r=void 0===n||n,i=e.showAvatar,a=e.children,s=e.timestamp;return(0,u.FD)(X.S,{css:es.root,row:!0,gap:8,"data-event-type":"ai-message",style:(t={},(0,o._)(t,ea.contentBackgroundColor,r?H.LU.interactiveBackground:H.LU.backgroundDefault),(0,o._)(t,"paddingBottom",H.LU.space16),t),children:[(0,u.Y)(X.S,{css:es.avatar,"data-avatar":!0,children:(0,u.Y)(V.l,{size:22,hidden:!(void 0===i||i)})}),(0,u.FD)(X.S,{css:es.main,children:[(0,u.Y)(X.S,{css:es.contentWrapper,children:(0,u.Y)(M.ui,{elevated:r,css:es.content,children:a})}),s?(0,u.Y)(X.S,{css:es.footer,"data-timestamp":!0,children:(0,u.Y)(Z.Dc,{live:!0,date:s,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})}):null]})]})}let ed=function(e){var t,n,r,i,o,l,p,f=e.onComplete,h=e.loadingRepl,m=void 0!==h&&h,v=el(),_=v.messageList,w=v.streamText,A=v.isStreaming,Y=b(),k=Y.loading,C=Y.data,L=(i=(t=(0,d._)({},y,void 0),r=g.I(x,t)).data,o=r.loading,r.error?{loading:o}:{authorizations:(null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:n.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?i.currentUser.personalOrgAuthorizations:void 0,loading:o}),D=L.authorizations,E=L.loading,S=(0,P.N)().directQueryPrompt,z=k||E,R=(0,c.useRef)(!1),B=(l=(0,a._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:if(!((null==C?void 0:null===(e=C.currentUser)||void 0===e?void 0:e.isVerified)||W))return[3,2];return w("Thanks for verifying your account.","email-verified"),w(er,"text"),[4,f()];case 1:return t.sent(),[2];case 2:return[2]}})}),function(){return l.apply(this,arguments)}),V=(0,c.useCallback)(function(){var e;w("\n  I sent an email to ".concat((null==C?void 0:null===(e=C.currentUser)||void 0===e?void 0:e.email)?C.currentUser.email:"your inbox",". Before I create a plan for building your idea, you'll need to verify your email address.\n  \n  Please keep this tab open and return after verifying."),"text")},[C,w]),H=(0,O.A)({onEmailVerified:B,onError:function(e){w("I had some trouble verifying your email. Please try again.","text"),U.Cp(e)}}),Q=H.isVerified,W=void 0!==Q&&Q,j=H.loading,q=(0,c.useCallback)(function(){if((null==D?void 0:D.freeAgent.isAuthorized)||(null==D?void 0:D.paidAgent.isAuthorized)){w(er,"text"),f();return}V()},[D,f,V,w]);(0,c.useEffect)(function(){R.current||z||j||!C||_.length>0||(R.current=!0,q())},[C,j,z,_,q]);var M=(p=(0,a._)(function(){var e,t;return(0,s.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,T.B2)("/data/user/resend_verification",{aiPrompt:S})];case 1:return n.sent(),w("I’ve sent another email to your email address. Please check your inbox and spam folder.","text"),[3,3];case 2:return t=(e=n.sent()).message,w("I had some trouble sending the email. ".concat(t),"text"),U.Cp(e),[3,3];case 3:return[2]}})}),function(){return p.apply(this,arguments)});return z?(0,u.Y)(ee.A,{}):(0,u.FD)(X.S,{css:es.container,gap:8,children:[(0,u.Y)(X.S,{children:(0,u.FD)($.Y9,{level:1,variant:"subheadBig",css:es.header,children:["You’re almost ready to use the ",(0,F.Nn)({variant:"formal"})]})}),(0,u.FD)(X.S,{css:es.fakeAgent,children:[_.map(function(e,t){return(0,u.FD)(ec,{timestamp:e.timestamp,children:[(0,u.Y)(N.d2,{text:e.text,messageState:I.qOk.IN_PROGRESS}),"email-verified"===e.kind&&e.done?(0,u.Y)(X.S,{css:es.pillContainer,children:(0,u.Y)(J.a,{css:es.pill,text:"Email verified",iconLeft:(0,u.Y)(K.A,{}),colorway:"green"})}):null]},t)}),W?null:(0,u.FD)(u.FK,{children:[(0,u.FD)(X.S,{css:es.buttonContainer,children:[(0,u.Y)(J.a,{css:es.pill,text:"Not verified yet",iconLeft:(0,u.Y)(en.A,{}),colorway:"blurple"}),(0,u.Y)(G.$n,{iconLeft:(0,u.Y)(et.A,{}),onClick:M,text:"Resend email",size:"small",disabled:m||A})]}),!1]}),m?(0,u.Y)(G.$n,{iconLeft:(0,u.Y)(ee.A,{}),onClick:function(){},text:"Loading your project...",size:"small",colorway:"blurple",disabled:!0,loading:m}):null]})]})};var ep=n(89133),ef=n(40500),eg=n(86587),eh=n(38884),em=(0,W.x)({container:[q.wp.minHeight("100vh"),q.wp.width("100%")],body:[q.wp.pt(16),q.wp.pb(8),q.wp.px(16),q.wp.borderRadius(),q.wp.maxWidth("650px"),q.wp.minWidth("300px"),q.wp.width("100%"),(0,o._)({},q.$_.max("tabletMax"),[q.wp.maxWidth("100%"),q.wp.m(24)])]}),ev=function(e){var t,n=e.currentUser,r=(0,l.useRouter)(),i=(0,D.g)(),o="loading"===i.type,d="data"===i.type&&i.canCreateRepl,p=!o&&!d,f=(0,L.M)({currentUser:n}),g=f.createAgentRepl,h=f.status,m=(0,P.N)().aiPrompt,v=(0,c.useCallback)((0,a._)(function(){var e,t;return(0,s.YH)(this,function(n){switch(n.label){case 0:if(!d)return[2];return e=[],[4,(0,ep.Pz)()];case 1:return(t=n.sent())&&t.length>0&&(e=t.map(function(e){return{path:(0,eg.Vg)(e.name),mimeType:e.type,file:e.file,isLoading:!1}})),[4,g({prompt:m,attachments:e,attachedUrls:[],isPrivate:!1})];case 2:return n.sent(),[2]}})}),[g,m,d]),y=function(){r.push("/home","/~")},_=b(),w=_.loading,x=_.data,A=(0,c.useRef)(!1),Y=(null==x?void 0:null===(t=x.currentUser)||void 0===t?void 0:t.isVerified)||!1;return((0,c.useEffect)(function(){w||o||!Y||A.current||(A.current=!0,v())},[w,o,Y,v]),w||o||Y)?(0,u.FD)(X.S,{css:em.container,align:"center",justify:"center",children:[(0,u.Y)(ef.A,{isOpen:p,onClose:y,type:"purchase",analyticsContext:{upgrade:{context:"repl_limit_upsell",surface:"membership_purchase_modal"}},reloadPageAfterPurchaseComplete:!1,onPurchaseComplete:y,contextualUpsell:(0,u.FD)(X.S,{gap:8,children:[(0,u.FD)($.EY,{variant:"subheadDefault",children:["You have reached your ",C.Lm," plan limit"]}),(0,u.FD)($.EY,{variant:"subheadBig",children:["Upgrade to Replit ",C.en]})]})}),(0,u.Y)(ee.A,{"data-cy":"agent-verify-loading-spinner"})]}):(0,u.Y)(X.S,{css:em.container,align:"center",justify:"center",children:(0,u.Y)(M.ui,{elevated:!0,css:em.body,children:(0,u.Y)(ed,{onComplete:v,loadingRepl:"idle"!==h})})})};let ey=function(){var e,t=(e=(0,d._)({},Y,void 0),g.I(k,e)).data,n=null==t?void 0:t.currentUser;return(0,u.Y)(eh.A,{title:"Replit Agent",noHeader:!0,noFooter:!0,noSidebar:!0,noBackground:!0,hideEmailVerify:!0,children:n?(0,u.Y)(ev,{currentUser:n}):null})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3346,6279,6892,3936,5334,2944,4576,1487,2528,3426,7928,7564,7973,8707,3077,5281,1357,1949,6019,5183,1302,8884,5617,778,9175,424,1757,5728,645,1061,5351,6593,636,8792],()=>t(19841)),_N_E=e.O()}]);
//# sourceMappingURL=agentVerify-10f35bde58627eb6.js.map